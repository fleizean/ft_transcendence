{% extends 'base.html' %}

{% block title %}Search{% endblock title %}

{% load static %}

{% block stylesheet %}<link rel="stylesheet" href="../../../static/css/search.css">{% endblock stylesheet %}

{% block app %}
  {% include "_nav.html" %}
<div class="container-top">
    <div class="search-card">
        <!-- Arama kutusu ve butonu -->
        <form action="{% url 'search' %}" method="POST">
            {% csrf_token %}
            <div class="search-container">
                <input type="text" name="search_query" placeholder="Email or Username Search..." class="search-input" autocomplete="off" data-lpignore="true">
                <button class="search-button" type="submit"><i class="bi bi-search"></i></button>
            </div>
        </form>

        <div class="card-container-wrapper">
        <!-- Arama sonuçları -->
        {% if results %}
            {% for kullanici in results %}
            
              <div class="card-containers">
                <div class="profile-card">
                    <div class="image">
                        {% if kullanici.avatar %}
                            <img src="{{kullanici.avatar.url}}" alt="" class="profile-img" />
                        {% else %}
                            <img src="/static/assets/profile/profilephoto.jpeg" alt="" class="profile-img" />
                        {% endif %}
                    </div>
                    <div class="text-data">
                      <span class="name">{{kullanici.username}}</span>
                      <span class="job">{{kullanici.displayname}}</span>
                    </div>
                    <div class="media-buttons">
                      {% if kullanici.stackoverflow %}
                        <a href="{{kullanici.stackoverflow}}" class="medialinks stackoverflow"><i class="bi bi-stack-overflow"></i></a>
                      {% endif %}
                      {% if kullanici.twitter %}
                        <a href="{{kullanici.twitter}}" class="medialinks twitter"><i class="bi bi-twitter"></i></a>
                      {% endif %}
                      {% if kullanici.github %}
                        <a href="{{kullanici.github}}" class="medialinks github"><i class="bi bi-github"></i></a>
                      {% endif %}
                      {% if kullanici.instagram %}
                        <a href="{{kullanici.instagram}}" class="medialinks instagram"><i class="bi bi-instagram"></i></a>
                      {% endif %}
                    </div>
                    {% if not kullanici.stackoverflow and not kullanici.twitter and not kullanici.github and not kullanici.instagram %}
                      <div class="buttons" style="margin-top: 60px !important;">
                        <button class="button-follow">Follow</button>
                        <button class="button-message">Message</button>
                      </div>
                    {% else %}
                      <div class="buttons">
                        <button class="button-follow">Follow</button>
                        <button class="button-message">Message</button>
                      </div>
                    {% endif %}
                  
                      <div class="analytics">
                        <div class="data">
                          <i class="bi bi-dice-1-fill" style="color: #FF5733;"></i>
                          <span class="number">50</span>
                        </div>
                        <div class="data">
                          <i class="bi bi-trophy-fill" style="color: #FFD601;"></i>
                          <span class="number">50</span>
                        </div>
                        <div class="data">
                          <i class="bi bi-award-fill" style="color: #4CAF4F;"></i>
                          <span class="number">100%</span>
                        </div>
                      </div>
                   
                </div>
              </div>
            {% endfor %}
        {% else %}
            <p style="color:orange; font-weight:bold; text-align: center;">No results found.</p>
        {% endif %}
      </div>
        </div>
    </div>
</div>
</div>
{% endblock app %}