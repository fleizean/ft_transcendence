{% extends 'base.html' %}

{% load static %}

{% block title %}
  Play with AI
{% endblock %}

{% block stylesheet %}<link rel="stylesheet" href="{% static 'css/rps.css' %}"/>
<link rel="stylesheet" href="{% static 'css/game-find.css' %}">
{% endblock %}

{% block app %}

  <div class="ai-btn">
    <h3 class="user-count-text">{{context.rpsUserCountText}}:</h3>
    <h5 class="user-count" id="userCount">0</h5>

    <div class="ponggamebtn" id="ponggamebtn" onclick="searchOpponent()">
      {{context.rpsGameSearchOpponentButtonText}} <i class="bi bi-person-arms-up"></i>
    </div>
  </div>
  <div class="container-top" id="container-top" style="visibility: hidden;" data-iconpath="{% static "assets/rps/" %}">
    <div class="header-top">
      <div class="header">
        <div class="score" style="margin-right: 15px;">
          <div class="player1_name" id="player1Name"> </div>
          <div class="score__title">{{context.rpsGameScoreText}}</div>
          <div class="score__number">0</div>
        </div>
        <h3 class="rps-header-text">{{context.rpsGameRockText}}<br />{{context.rpsGamePaperText}}<br />{{context.rpsGameScissorsText}}</h3>
        <div class="score" style="margin-left: 15px;">
          <div class="player2_name" id="player2Name"></div>
          <div class="score__title">{{context.rpsGameScoreText}}</div>
          <div class="score__number">0</div>
        </div>
      </div>
    </div>
    <section class="game">
      <button class="choice-btn" data-choice="paper">
        <div class="choice paper">
          <img src="{% static 'assets/rps/icon-paper.svg' %}" alt="Paper" />
        </div>
      </button>
      <button class="choice-btn" data-choice="scissors">
        <div class="choice scissors">
          <img src="{% static 'assets/rps/icon-scissors.svg' %}" alt="Scissors" />
        </div>
      </button>
      <button class="choice-btn" data-choice="rock">
        <div class="choice rock">
          <img src="{% static 'assets/rps/icon-rock.svg' %}" alt="Rock" />
        </div>
      </button>
    </section>
  </div>
  

  <section class="results hidden">
    <h2 class="results__heading">{{context.rpsGamePickedText}}</h2>
    <h2 class="results__heading">{{context.rpsGamePickedText2}}</h2>
    <div class="results__result"></div>
    <div class="results__winner hidden">
      <h3 class="results__text"></h3>
      <button class="play-again">{{context.rpsGameAgainText}}</button>
    </div>
    <div class="results__result"></div>
  </section>
  
  <div id="gameOverScreen" class="game-over">
    <h1 id="winnerText" class="winnerName"></h1>
    <h2 style="color: white;">{{context.rpsGameGameOverText}}</h2>
    <button id="restartButton">{{context.rpsGameRestartButtonText}}</button>
    <button id="exitButton">{{context.rpsGameExitButtonText}}</button>
  </div>

<div class="toast-container position-fixed bottom-0 end-0 p-6" style="margin-right: 20px; margin-bottom: 20px">
  <div class="toast text-bg-danger" id="liveToast" role="alert">
      <div class="toast-body">
          <div class="d-flex gap-4">
              <span class="i-class"><i class="bi bi-image"></i></span>
              <div class="d-flex flex-grow-1 align-items-center">
                  <span class="fw-semibold"></span>
                  <span class="toast-close" style="margin-left: auto;" data-bs-dismiss="toast"><i class="bi bi-x-circle-fill"></i></span>
              </div>
          </div>
      </div>
  </div>
</div>

  <script>
    function showToast(content, status, iconClass) {
        const liveToast = document.getElementById('liveToast');
        var toastContent = document.querySelector('#liveToast .fw-semibold');
        var toastIcon = document.querySelector('.toast-body .i-class i');

        toastIcon.className = iconClass;
        liveToast.classList.remove('text-bg-danger'); 
        liveToast.className = 'toast'; 
        liveToast.classList.add(status);

        toastContent.textContent = content;
        const toast = new bootstrap.Toast(liveToast);
        toast.show();
        setTimeout(function() {
            toast.hide();
        }, 8000);
    }
  </script>
  <script src="{% static 'js/sockRps.js' %}"></script>
{% endblock %}
