{% extends 'chat.html' %}
{% load static %}

{% block diff %}
<div class="conversation active" id="conversation-1">
  <div class="conversation-top">
    <button type="button" class="conversation-back"><i class="bi bi-arrow-left-circle-fill"></i></button>
    <div class="conversation-user">
      <img class="conversation-user-image" src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8cGVvcGxlfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60" alt="" />
      <div>
        <div class="conversation-user-name">
          {% if room.first_user == request.user %}
              {{ room.second_user }}
              {% else %}
                  {{ room.first_user}}
          {% endif %}
        </div>
        <div class="conversation-user-status online">online</div>
      </div>
    </div>
    <div class="conversation-buttons">
      <div>
        <div>
            <button type="button" id="acceptButton" style="margin-right: 40px;">Accept</button>
            <button type="button" id="declineButton" style="margin-right: 40px;">Decline</button>
        </div>
      </div>
      <button type="button"><i class="bi bi-person-add"></i></button>
      <button type="button"><i class="bi bi-controller" id="inviteButton"></i></button>

      <button type="button" id="block"><i class="bi bi-ban"></i></button>
    </div>
  </div>
  <div class="conversation-main" id="conversation">
    <ul class="conversation-wrapper">
      <div class="coversation-divider">
        <span>Today</span>
      </div>
      {% for message in messages %}
        {% if request.user == message.user %} 
        <li class="conversation-item me">
        <div class="conversation-item-content">
          <div class="conversation-item-wrapper">
            <div class="conversation-item-box">
            </div>
          </div>
          <div class="conversation-item-wrapper">
            <div class="conversation-item-box">
              <div class="conversation-item-text">
                {{ message.content }}
                <div class="conversation-item-time">{{ message.get_short_date }}</div>
              </div>
            </div>
          </div>
        </div>
        </li>
          {% else %}
            <li class="conversation-item">
              <div class="conversation-item-content">
                <div class="conversation-item-wrapper">
                  <div class="conversation-item-box">
                    <div class="conversation-item-text">
                      {{ message.content }}
                      <div class="conversation-item-time">{{ message.get_short_date }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
  <div class="conversation-form">
    <button type="button" class="conversation-form-button"><i class="bi bi-emoji-laughing-fill"></i></button>
    <div class="conversation-form-group">
      <textarea class="conversation-form-input" rows="1" id="comment" placeholder="Type here..."></textarea>
      <button type="button" class="conversation-form-record" id="send"><i class="bi bi-send-fill"></i></button>
    </div>
  </div>
</div>
</div>
<!-- end: Content -->
</div>
{{ room_name|json_script:"room-name" }}
{{ request.user.username|json_script:"user" }}

<script type="module" src="{% static "js/gamesocket.js" %}"></script>
<script type="module" src="{% static "js/chat.js" %}"></script>
{% endblock diff %}
